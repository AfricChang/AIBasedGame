<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ¨ç‰©æ¶ˆæ¶ˆæ¶ˆ - ç›Šæ™ºæ¶ˆé™¤æ¸¸æˆ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <button class="back-button" onclick="confirmExit()">â†</button>
    <div class="game-container">
        <!-- éŸ³æ•ˆæ§åˆ¶æŒ‰é’® -->
        <button class="audio-control" id="audioToggle" title="åˆ‡æ¢éŸ³æ•ˆ">
            ğŸ”Š
        </button>
        
        <div class="header">
            <div class="score-panel">
                <div class="score-item">
                    <span class="score-label">åˆ†æ•°</span>
                    <span class="score-value" id="score">0</span>
                </div>
                <div class="score-item">
                    <span class="score-label">è¿å‡»</span>
                    <span class="score-value" id="combo">0</span>
                </div>
                <div class="score-item">
                    <span class="score-label">å…³å¡</span>
                    <span class="score-value" id="level">1</span>
                </div>
            </div>
            <div class="tools-panel">
                <button id="shuffle-btn" class="tool-btn" title="æ´—ç‰Œ">
                    <span class="tool-icon">ğŸ”€</span>
                    <span class="tool-count" id="shuffle-count">3</span>
                </button>
                <button id="flip-btn" class="tool-btn" title="ç¿»è½¬æ–¹å‘">
                    <span class="tool-icon">ğŸ”„</span>
                    <span class="tool-count" id="flip-count">3</span>
                </button>
                <button id="hint-btn" class="tool-btn" title="æç¤º">
                    <span class="tool-icon">ğŸ’¡</span>
                    <span class="tool-count" id="hint-count">5</span>
                </button>
            </div>
        </div>
        
        <div class="game-board-container">
            <div class="game-board" id="gameBoard">
                <!-- æ¸¸æˆæ ¼å­å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <!-- ç²’å­æ•ˆæœç”»å¸ƒ -->
            <canvas class="particle-canvas" id="particleCanvas"></canvas>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
            <span class="progress-text" id="progressText">0/10</span>
        </div>
        
        <div class="game-info">
            <p>ç‚¹å‡»åŠ¨ç‰©ç§»åŠ¨å®ƒä»¬ï¼åŠ¨ç‰©ä¼šæ²¿ç€ç®­å¤´æ–¹å‘ç§»åŠ¨è¿›è¡Œæ¶ˆé™¤å¾—åˆ†ã€‚</p>
        </div>
    </div>
    
    <!-- æ¸¸æˆç»“æŸå¼¹çª— -->
    <div id="gameOverModal" class="modal hidden">
        <div class="modal-content">
            <h2>æ¸¸æˆç»“æŸ</h2>
            <p>æœ€ç»ˆåˆ†æ•°: <span id="finalScore">0</span></p>
            <p>æœ€é«˜è¿å‡»: <span id="maxCombo">0</span></p>
            <button id="restartBtn" class="btn-primary">é‡æ–°å¼€å§‹</button>
        </div>
    </div>
    
    <!-- èƒœåˆ©å¼¹çª— -->
    <div id="victoryModal" class="modal hidden">
        <div class="modal-content">
            <h2>æ­å–œè¿‡å…³ï¼</h2>
            <p>è·å¾—åˆ†æ•°: <span id="levelScore">0</span></p>
            <p>è¿å‡»å¥–åŠ±: <span id="comboBonus">0</span></p>
            <button id="nextLevelBtn" class="btn-primary">ä¸‹ä¸€å…³</button>
        </div>
    </div>
    
    <script src="audio.js"></script>
    <script src="particles.js"></script>
    <script src="game.js"></script>
    <script>
        // å¯¼èˆªåŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const dialogHTML = `
                <div class="dialog-overlay"></div>
                <div class="confirm-dialog">
                    <p>ç¡®å®šè¦è¿”å›ä¸»èœå•å—ï¼Ÿå½“å‰è¿›åº¦å°†ä¸ä¼šä¿å­˜ã€‚</p>
                    <div class="confirm-dialog-buttons">
                        <button class="confirm-yes">ç¡®å®š</button>
                        <button class="confirm-no">å–æ¶ˆ</button>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', dialogHTML);

            // ç»‘å®šäº‹ä»¶
            const overlay = document.querySelector('.dialog-overlay');
            const dialog = document.querySelector('.confirm-dialog');
            const yesButton = dialog.querySelector('.confirm-yes');
            const noButton = dialog.querySelector('.confirm-no');

            yesButton.addEventListener('click', () => {
                window.location.href = '../index.html';
            });

            noButton.addEventListener('click', () => {
                overlay.style.display = 'none';
                dialog.style.display = 'none';
            });

            overlay.addEventListener('click', () => {
                overlay.style.display = 'none';
                dialog.style.display = 'none';
            });
        });

        function confirmExit() {
            const overlay = document.querySelector('.dialog-overlay');
            const dialog = document.querySelector('.confirm-dialog');
            overlay.style.display = 'block';
            dialog.style.display = 'block';
        }
    </script>
</body>
</html>